cmake_minimum_required(VERSION 3.12 FATAL_ERROR)
set(PROFILE_PATH cmake_profiles)
# GCC options for all compilation profiles
set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -Wall -Wextra")

project(ChessEngine VERSION 1.0.0 LANGUAGES C)
if("${WHICH}" STREQUAL "")
  message(FATAL_ERROR "=== [CMakeLists.txt] No '-DWHICH=' specified")
else()
  set(CMAKELISTS_FILE "${CMAKE_CURRENT_LIST_DIR}/${PROFILE_PATH}/CMakeLists.txt-${WHICH}")
  if (EXISTS "${CMAKELISTS_FILE}" AND NOT IS_DIRECTORY "${CMAKELISTS_FILE}")
    message("=== [CMakeLists.txt] Including ${CMAKELISTS_FILE}")
    include(${CMAKELISTS_FILE})
    message("=== [CMakeLists.txt] Included ${CMAKELISTS_FILE}")
  else()
    message(FATAL_ERROR "=== [CMakeLists.txt] Cannot find ${CMAKELISTS_FILE}")
  endif()
endif()
